{
	"info": {
		"_postman_id": "9646ee8d-e442-4de7-be46-31ddc62f2eaf",
		"name": "mod-kb-ebsco-java",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "schemas",
			"item": [
				{
					"name": "JSON API schema",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "d8c9ac0f-96ad-4626-b6cd-5bd280e0e1a6",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "f061e372-511f-4136-98bc-32651b757f0e",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"GET schema_parameters OK\", function () {",
									"    pm.response.to.be.ok;",
									"});",
									"",
									"pm.test(\"GET schema_parameters has JSON body\", function () {",
									"    pm.response.to.have.jsonBody();",
									"});",
									"",
									"pm.environment.set(\"schema_jsonapi_content\", responseBody);"
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "X-Okapi-Tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "http://jsonapi.org/schema",
							"protocol": "http",
							"host": [
								"jsonapi",
								"org"
							],
							"path": [
								"schema"
							]
						},
						"description": "GET JSON API standard schema and store in collection environment variable - schema_jsonapi_content"
					},
					"response": []
				}
			]
		},
		{
			"name": "authentication",
			"item": [
				{
					"name": "/authn/login",
					"event": [
						{
							"listen": "test",
							"script": {
								"type": "text/javascript",
								"exec": [
									"var token = postman.getResponseHeader(\"x-okapi-token\")",
									"pm.environment.set(\"xokapitoken\", token);",
									"",
									"pm.test(\"Status code is 201\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\"username\":\"{{username}}\",\"password\":\"{{password}}\"}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/authn/login",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"authn",
								"login"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "setup configuration",
			"item": [
				{
					"name": "Check if  url exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "b6a548cd-23a5-4b8c-9bf9-622e404e5f04",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.environment.set(\"apiUrlExists\", false);",
									"",
									"if(jsonData!==null && jsonData.configs.length!==0) {",
									"    pm.environment.set(\"apiUrlExists\", true);",
									"    //\"rm api url exists -- do not overwrite\");",
									"    postman.setNextRequest(\"Check if customerId exists\");",
									"}",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d665ae85-57e5-40c5-a197-48a2b098fc0a",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==EKB and configName==api_access and code==kb.ebsco.url)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==EKB and configName==api_access and code==kb.ebsco.url)"
								}
							]
						},
						"description": "Check if rm api url has already been configured for test user.  If so, do not want to overwrite existing configuration settings"
					},
					"response": []
				},
				{
					"name": "/configurations/entries - POST RM API URL",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5c5c18b8-178f-4395-9e60-5313f2d03260",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "1999127b-87cf-45b8-a245-be854e138af4",
								"type": "text/javascript",
								"exec": [
									"",
									"pm.test(\"Success test on json response\", function() {",
									"    pm.response.to.be.json;",
									"});",
									"",
									"pm.test(\"Status is 201 - configuration entry successfully created for rm api url\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Content-Type header has expected value\", function () {",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.contain(\"application/json\");",
									"});",
									"",
									"//Store rm-api-url-id temporarily for clean-up purpose",
									"let body = JSON.parse(responseBody);",
									"pm.environment.set(\"rm-api-url-id\", body.id);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Okapi-Tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "X-Okapi-Token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": " {\r\n    \"module\": \"EKB\",\r\n    \"configName\": \"api_access\",\r\n    \"code\": \"kb.ebsco.url\",\r\n    \"description\": \"EBSCO RM-API URL\",\r\n    \"enabled\": true,\r\n    \"value\": \"https://sandbox.ebsco.io\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							]
						}
					},
					"response": []
				},
				{
					"name": "Check if customerId exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "6cf60b97-d5e9-4028-86ff-9b20ecc32dba",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.environment.set(\"customerIdExists\", false);",
									"",
									"if(jsonData!==null && jsonData.configs.length!==0) {",
									"    pm.environment.set(\"customerIdExists\", true);",
									"     //\"rm api customer id exists -- do not overwrite\");",
									"    postman.setNextRequest(\"Check if apiKey exists\");",
									"}",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d665ae85-57e5-40c5-a197-48a2b098fc0a",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==EKB and configName==api_access and code==kb.ebsco.customerId)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==EKB and configName==api_access and code==kb.ebsco.customerId)"
								}
							]
						},
						"description": "Check if rm api url has already been configured for test user.  If so, do not want to overwrite existing configuration settings"
					},
					"response": []
				},
				{
					"name": "/configurations/entries - POST RM API api_customer id",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5c5c18b8-178f-4395-9e60-5313f2d03260",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "23f25d7b-cbf3-4053-9fc3-35f06a3fffcc",
								"type": "text/javascript",
								"exec": [
									"",
									"pm.test(\"Success test on json response\", function() {",
									"    pm.response.to.be.json;",
									"});",
									"",
									"pm.test(\"Status is 201 - configuration entry successfully created for rm api customer id\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Content-Type header has expected value\", function () {",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.contain(\"application/json\");",
									"});",
									"",
									"//Store rm-api-customer-id temporarily for clean-up purpose",
									"let body = JSON.parse(responseBody);",
									"pm.environment.set(\"rm-api-customer-id\", body.id);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Okapi-Tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "X-Okapi-Token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": " {\r\n    \"module\": \"EKB\",\r\n    \"configName\": \"api_access\",\r\n    \"code\": \"kb.ebsco.customerId\",\r\n    \"description\": \"EBSCO RM-API Customer ID\",\r\n    \"enabled\": true,\r\n    \"value\": \"{{custid}}\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							]
						},
						"description": "Create customer id as part of configuration"
					},
					"response": []
				},
				{
					"name": "Check if apiKey exists",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "30b0b57f-a25a-41b2-9390-f1e72c241b4c",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"var jsonData = pm.response.json();",
									"",
									"pm.environment.set(\"apiKeyExists\", false);",
									"",
									"if(jsonData!==null && jsonData.configs.length!==0) {",
									"    pm.environment.set(\"apiKeyExists\", true);",
									"     //\"rm api key exists -- do not overwrite\");",
									"    postman.setNextRequest(\"First Test - Placeholder\");",
									"}",
									"",
									"",
									"",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d665ae85-57e5-40c5-a197-48a2b098fc0a",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==EKB and configName==api_access and code==kb.ebsco.apiKey)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==EKB and configName==api_access and code==kb.ebsco.apiKey)"
								}
							]
						},
						"description": "Check if rm api url has already been configured for test user.  If so, do not want to overwrite existing configuration settings"
					},
					"response": []
				},
				{
					"name": "/configurations/entries - POST RM API apiKey",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "5c5c18b8-178f-4395-9e60-5313f2d03260",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "732d3a7c-3a6f-4f9b-b904-9cc6887ccdc3",
								"type": "text/javascript",
								"exec": [
									"",
									"pm.test(\"Success test on json response\", function() {",
									"    pm.response.to.be.json;",
									"});",
									"",
									"pm.test(\"Status is 201 - configuration entry successfully created for rm api customer id\", function () {",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"pm.test(\"Content-Type header has expected value\", function () {",
									"    pm.expect(pm.response.headers.get(\"Content-Type\")).to.contain(\"application/json\");",
									"});",
									"",
									"//Store rm-api-key-id temporarily for clean-up purpose",
									"let body = JSON.parse(responseBody);",
									"pm.environment.set(\"rm-api-key-id\", body.id);"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "X-Okapi-Tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "X-Okapi-Token",
								"value": "{{xokapitoken}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": " {\r\n    \"module\": \"EKB\",\r\n    \"configName\": \"api_access\",\r\n    \"code\": \"kb.ebsco.apiKey\",\r\n    \"description\": \"EBSCO RM-API API Key\",\r\n    \"enabled\": true,\r\n    \"value\": \"{{rmapi_api_key}}\"\r\n}"
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							]
						},
						"description": "Create customer id as part of configuration"
					},
					"response": []
				},
				{
					"name": "First Test - Placeholder",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "4289e6d1-9e7e-43bf-b5e7-fca0899d4c09",
								"type": "text/javascript",
								"exec": [
									"//placeholder first test to jump to ",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "d665ae85-57e5-40c5-a197-48a2b098fc0a",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==EKB and configName==api_access and code==kb.ebsco.url)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==EKB and configName==api_access and code==kb.ebsco.url)"
								}
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "7378bc5c-916f-41aa-b57e-b2c274efe3f3",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "a26b4778-0c56-409b-93fe-f848a949171b",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		},
		{
			"name": "tear-down configuration",
			"item": [
				{
					"name": "Check if configuration RM API url exists and should delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "ebc0ca22-5260-42d7-b578-c8ff1a2fe889",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"let jsonData = pm.response.json();",
									"let apiUrlExists = pm.environment.get(\"apiUrlExists\");",
									"if((jsonData !==null && jsonData.configs.length >0) && apiUrlExists) {",
									"    //Api url previously existed -- DO NOT DELETE (end execution)",
									"    postman.setNextRequest(\"Check if configuration RM API customerid exists and should delete\");",
									"}",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e850480-32fc-4384-92fb-1faf179e993b",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==EKB and configName==api_access and code==kb.ebsco.url)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==EKB and configName==api_access and code==kb.ebsco.url)"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/configurations/entries - Clean-up RM API api_credentials",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "4e9417a7-609d-42de-bb41-87a93d38ba65",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "45e87c73-961f-4262-973c-e6b5d8acac73",
								"type": "text/javascript",
								"exec": [
									"//Clean-up RM API Key configuration created during POST",
									"pm.test(\"Verify RM API URL deletion with status 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"pm.test(\"'x-okapi-permissions' header is present\", function () {",
									"    pm.response.to.have.header(\"x-okapi-permissions\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-Okapi-Tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "X-Okapi-Token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries/{{rm-api-url-id}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries",
								"{{rm-api-url-id}"
							]
						},
						"description": "Clean-up RM-API Key configuration"
					},
					"response": []
				},
				{
					"name": "Check if configuration RM API customerid exists and should delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "7886c216-80c5-4093-8f4e-96d01b2cc90e",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"let jsonData = pm.response.json();",
									"let customerIdExists = pm.environment.get(\"customerIdExists\");",
									"if((jsonData !==null && jsonData.configs.length >0) && customerIdExists) {",
									"    //customer id previously existed -- DO NOT DELETE (end execution)",
									"    postman.setNextRequest(\"Reset Variables\");",
									"}",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e850480-32fc-4384-92fb-1faf179e993b",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==EKB and configName==api_access and code==kb.ebsco.customerId)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==EKB and configName==api_access and code==kb.ebsco.customerId)"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/configurations/entries - Clean-up RM API customer id",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "4e9417a7-609d-42de-bb41-87a93d38ba65",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "45e87c73-961f-4262-973c-e6b5d8acac73",
								"type": "text/javascript",
								"exec": [
									"//Clean-up RM API Key configuration created during POST",
									"pm.test(\"Verify RM API URL deletion with status 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"pm.test(\"'x-okapi-permissions' header is present\", function () {",
									"    pm.response.to.have.header(\"x-okapi-permissions\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-Okapi-Tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "X-Okapi-Token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries/{{rm-api-customer-id}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries",
								"{{rm-api-customer-id}}"
							]
						},
						"description": "Clean-up RM-API Key configuration"
					},
					"response": []
				},
				{
					"name": "Check if configuration RM API apiKey exists and should delete",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "f89139b1-5bc1-47f2-82e4-7dcaf0513b1f",
								"type": "text/javascript",
								"exec": [
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"pm.test(\"Response must be valid and have a body\", function () {",
									"    pm.response.to.be.ok; ",
									"    pm.response.to.be.withBody;",
									"    pm.response.to.be.json; ",
									"});",
									"",
									"let jsonData = pm.response.json();",
									"let apiKeyExists = pm.environment.get(\"apiKeyExists\");",
									"if((jsonData !==null && jsonData.configs.length >0) && apiKeyExists) {",
									"    //Api key previously existed -- DO NOT DELETE (end execution)",
									"    postman.setNextRequest(\"Reset Variables\");",
									"}",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e850480-32fc-4384-92fb-1faf179e993b",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==EKB and configName==api_access and code==kb.ebsco.apiKey)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==EKB and configName==api_access and code==kb.ebsco.apiKey)"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "/configurations/entries - Clean-up RM API Key",
					"event": [
						{
							"listen": "prerequest",
							"script": {
								"id": "4e9417a7-609d-42de-bb41-87a93d38ba65",
								"type": "text/javascript",
								"exec": [
									""
								]
							}
						},
						{
							"listen": "test",
							"script": {
								"id": "45e87c73-961f-4262-973c-e6b5d8acac73",
								"type": "text/javascript",
								"exec": [
									"//Clean-up RM API Key configuration created during POST",
									"pm.test(\"Verify RM API URL deletion with status 204\", function () {",
									"    pm.response.to.have.status(204);",
									"});",
									"",
									"pm.test(\"'X-Okapi-Trace' header is present\", function () {",
									"    pm.response.to.have.header(\"X-Okapi-Trace\");",
									"});",
									"",
									"pm.test(\"'x-okapi-permissions' header is present\", function () {",
									"    pm.response.to.have.header(\"x-okapi-permissions\");",
									"});"
								]
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "X-Okapi-Tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "X-Okapi-Token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries/{{rm-api-key-id}}",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries",
								"{{rm-api-key-id}}"
							]
						},
						"description": "Clean-up RM-API Key configuration"
					},
					"response": []
				},
				{
					"name": "Reset Variables",
					"event": [
						{
							"listen": "test",
							"script": {
								"id": "93ea1def-f5f2-4d98-9571-99589b488730",
								"type": "text/javascript",
								"exec": [
									"//placeholder Reset Variables",
									"pm.test(\"Status is 200\", function () {",
									"    pm.response.to.have.status(200);",
									"});",
									""
								]
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"id": "9e4453a6-7061-4d96-90e2-f2eac533c754",
								"type": "text/javascript",
								"exec": [
									"// Reset all environment level variables that may have been setup in the tests",
									"pm.environment.unset(\"schema_jsonapi_content\");",
									"pm.environment.unset(\"apiUrlExists\");",
									"pm.environment.unset(\"rm-api-url-id\");",
									"pm.environment.unset(\"customerIdExists\");",
									"pm.environment.unset(\"rm-api-customer-id\");",
									"pm.environment.unset(\"apiKeyExists\");",
									"pm.environment.unset(\"rm-api-key-id\");",
									"pm.environment.unset(\"custom-providerid\");",
									"pm.environment.unset(\"custom-packageid\");",
									"pm.environment.unset(\"name-sort-id1\");",
									"pm.environment.unset(\"managed-packageid\");",
									"pm.environment.unset(\"custom-package-id-created-in-post\");",
									"pm.environment.unset(\"custom-package-id-created-in-post-again\");",
									"pm.environment.unset(\"custom-titlename-for-resource-duplicate\");",
									"pm.environment.unset(\"custom-packageid-for-resource\");",
									"pm.environment.unset(\"managed-titleid\");",
									"pm.environment.unset(\"managed-titlename\");",
									"pm.environment.unset(\"managed-title-package-resourceid\");",
									"pm.environment.unset(\"managed-resourceid\");",
									"pm.environment.unset(\"custom-resourceid\");",
									"",
									"pm.globals.unset(\"custom-package-name-that-exists\");",
									"",
									"pm.variables.unset(\"package-uuid\");",
									"pm.variables.unset(\"custom-title-uuid\");",
									"pm.variables.unset(\"custom-title-for-resource-uuid\");",
									"pm.variables.unset(\"custom-title-for-resource-uuid2\");",
									"pm.variables.unset(\"custom-package-for-resource-uuid\");",
									"pm.variables.unset(\"custom-title-pubtype-uuid\");",
									"pm.variables.unset(\"long-title-name\");",
									"pm.variables.unset(\"custom-title-pubtype-uuid\");",
									"pm.variables.unset(\"long-publisher-name\");",
									"pm.variables.unset(\"long-edition\");",
									"pm.variables.unset(\"long-description\");",
									"pm.variables.unset(\"long-identifier\");",
									"pm.variables.unset(\"packagename-pageone\");",
									"",
									"",
									"",
									""
								]
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "x-okapi-tenant",
								"value": "{{xokapitenant}}"
							},
							{
								"key": "x-okapi-token",
								"value": "{{xokapitoken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": ""
						},
						"url": {
							"raw": "{{protocol}}://{{url}}:{{okapiport}}/configurations/entries?query=(module==KB_EBSCO and configName==api_credentials and code==kb.ebsco.credentials)",
							"protocol": "{{protocol}}",
							"host": [
								"{{url}}"
							],
							"port": "{{okapiport}}",
							"path": [
								"configurations",
								"entries"
							],
							"query": [
								{
									"key": "query",
									"value": "(module==KB_EBSCO and configName==api_credentials and code==kb.ebsco.credentials)"
								}
							]
						}
					},
					"response": []
				}
			],
			"event": [
				{
					"listen": "prerequest",
					"script": {
						"id": "1027eea9-68c4-48eb-8193-b4c405e8f182",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				},
				{
					"listen": "test",
					"script": {
						"id": "352349d2-1dae-47f1-b9bd-bccbc161503d",
						"type": "text/javascript",
						"exec": [
							""
						]
					}
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"id": "21b4e28c-2132-4a4a-96fa-0fe8a64acc4c",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"id": "6ef3c15a-a770-4829-a38a-ec45d1e6b7fc",
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"id": "57356f66-4efb-40b5-957d-2450f8316abf",
			"key": "custid",
			"value": "apidvgvmt",
			"type": "string"
		},
		{
			"id": "ba6a58e0-35b1-4963-a125-d6b0bacf17b9",
			"key": "packageId",
			"value": "583-4345",
			"type": "string"
		},
		{
			"id": "9eee344d-9ec2-415b-b190-f70aba0bd65a",
			"key": "rmapi_api_key",
			"value": "",
			"type": "string"
		}
	]
}